<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events Management | Suhas Roy Admin</title>
    <link rel="stylesheet" href="css/admin-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body class="light-mode">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">Admin Portal</div>
            <button class="toggle-sidebar" aria-label="Toggle Sidebar">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="index.html" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-tachometer-alt"></i></span>
                    <span class="menu-text">Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="artworks.html" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-palette"></i></span>
                    <span class="menu-text">Artworks</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="events.html" class="menu-link active">
                    <span class="menu-icon"><i class="fas fa-calendar-alt"></i></span>
                    <span class="menu-text">Events</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="media.html" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-photo-video"></i></span>
                    <span class="menu-text">Media</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="inquiries.html" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-envelope"></i></span>
                    <span class="menu-text">Inquiries</span>
                </a>
            </li>
        </ul>
        <div class="sidebar-footer">
            <ul class="footer-menu">
            <li class="menu-item">
                <a href="settings.html" class="menu-link">
                    <span class="menu-icon"><i class="fas fa-cog"></i></span>
                    <span class="menu-text">Settings</span>
                </a>
            </li>
        </ul>
        </div>
    </div>
    
    <!-- Sidebar Overlay (Mobile) -->
    <div class="sidebar-overlay"></div>
    
        <!-- Header -->
        <header class="header">
        <div class="header-left">
            <h1 class="page-title">Events</h1>
        </div>
            <div class="header-center">
                <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" placeholder="Search events..." id="global-search">
                <button type="button" onclick="searchItems(document.getElementById('global-search').value, 'events')">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <div class="header-actions">
                <button class="header-action" title="Notifications">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                <button class="theme-toggle" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                    <i class="fas fa-sun"></i>
                </button>
            <div class="admin-info">
                <div class="admin-details">
                    <div class="admin-name">Admin User</div>
                    <div class="admin-role">Administrator</div>
                </div>
                <div class="admin-avatar">
                    <img src="../images/admin-avatar.jpg" alt="Admin">
                </div>
                </div>
            </div>
        </header>
        
    <!-- Main Content -->
    <div class="main-content">
        <div class="dashboard">
            <!-- Stats Overview -->
            <div class="stats-grid mb-3">
                <div class="stat-card">
                    <div class="stat-icon event-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-info">
                        <h3>24</h3>
                        <p>Upcoming Events</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon artwork-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3>1.2K</h3>
                        <p>Total Attendees</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon inquiry-icon">
                        <i class="fas fa-ticket-alt"></i>
                    </div>
                    <div class="stat-info">
                        <h3>â‚¹3.6L</h3>
                        <p>Ticket Revenue</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon media-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-info">
                        <h3>92%</h3>
                        <p>Attendance Rate</p>
                    </div>
                </div>
            </div>

            <!-- Action Bar -->
            <div class="d-flex justify-between align-center mb-3">
                <div class="action-buttons">
                    <button class="btn primary-btn" onclick="openModal('event-modal')">
                        <i class="fas fa-plus"></i> Add New Event
                    </button>
                    <button class="btn secondary-btn ml-2">
                        <i class="fas fa-file-export"></i> Export
                    </button>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters mb-3">
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="event-type">Event Type</label>
                        <select id="event-type" class="form-control">
                            <option value="">All Types</option>
                            <option value="Exhibition">Exhibition</option>
                            <option value="Workshop">Workshop</option>
                            <option value="Opening">Opening</option>
                            <option value="ArtistTalk">Artist Talk</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="date-range">Date Range</label>
                        <select id="date-range" class="form-control">
                            <option value="">All Dates</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="venue">Venue</label>
                        <select id="venue" class="form-control">
                            <option value="">All Venues</option>
                            <option value="MainGallery">Main Gallery</option>
                            <option value="Workshop">Workshop Space</option>
                            <option value="Auditorium">Auditorium</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="status">Status</label>
                        <select id="status" class="form-control">
                            <option value="">All Status</option>
                            <option value="upcoming">Upcoming</option>
                            <option value="ongoing">Ongoing</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                </div>
                <div class="filter-actions mt-2">
                    <button class="btn secondary-btn" onclick="applyFilters()">
                        <i class="fas fa-filter"></i> Apply Filters
                    </button>
                    <button class="btn text-btn ml-2" onclick="resetFilters()">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                </div>
            </div>

            <!-- Events Table -->
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Event Details</th>
                            <th>Date & Time</th>
                            <th>Venue</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="events-table-body">
                        <!-- Event rows will be populated dynamically -->
                    </tbody>
                </table>
                        </div>

            <!-- Pagination -->
            <div class="pagination mt-3">
                <button class="pagination-item" onclick="changePage(1)">
                    <i class="fas fa-angle-double-left"></i>
                            </button>
                <button class="pagination-item" onclick="changePage(currentPage - 1)">
                    <i class="fas fa-angle-left"></i>
                            </button>
                <button class="pagination-item active">1</button>
                <button class="pagination-item">2</button>
                <button class="pagination-item">3</button>
                <button class="pagination-item" onclick="changePage(currentPage + 1)">
                    <i class="fas fa-angle-right"></i>
                            </button>
                <button class="pagination-item" onclick="changePage(totalPages)">
                    <i class="fas fa-angle-double-right"></i>
                            </button>
                    </div>
                </div>
            </div>

    <!-- Add/Edit Event Modal -->
    <div class="modal-backdrop" id="event-modal">
        <div class="modal">
                    <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-calendar-plus"></i> <span id="modal-action">Add</span> Event</h2>
                <button class="close-modal" onclick="closeModal('event-modal')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                <form id="event-form">
                            <div class="form-row">
                        <div class="form-group form-col">
                                    <label for="event-title">Event Title</label>
                                    <input type="text" id="event-title" class="form-control" required>
                                </div>
                        <div class="form-group form-col">
                                    <label for="event-type-input">Event Type</label>
                                    <select id="event-type-input" class="form-control" required>
                                <option value="">Select Type</option>
                                <option value="Exhibition">Exhibition</option>
                                <option value="Workshop">Workshop</option>
                                <option value="Opening">Opening</option>
                                <option value="ArtistTalk">Artist Talk</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                        <div class="form-group form-col">
                            <label for="event-date">Date</label>
                            <input type="date" id="event-date" class="form-control" required>
                        </div>
                        <div class="form-group form-col">
                            <label for="event-time">Time</label>
                            <input type="time" id="event-time" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group form-col">
                            <label for="event-venue">Venue</label>
                            <select id="event-venue" class="form-control" required>
                                <option value="">Select Venue</option>
                                <option value="MainGallery">Main Gallery</option>
                                <option value="Workshop">Workshop Space</option>
                                <option value="Auditorium">Auditorium</option>
                            </select>
                                </div>
                        <div class="form-group form-col">
                            <label for="event-capacity">Capacity</label>
                            <input type="number" id="event-capacity" class="form-control" min="1" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="event-description">Description</label>
                                <textarea id="event-description" class="form-control" rows="4" required></textarea>
                            </div>
                            <div class="form-group">
                                <label>Event Image</label>
                                <div class="file-upload">
                                    <input type="file" id="event-image" accept="image/*" class="hidden">
                                    <div class="upload-area" onclick="document.getElementById('event-image').click()">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Click to upload or drag and drop</p>
                                        <span>Supported formats: JPG, PNG (max. 5MB)</span>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                <button class="btn secondary-btn" onclick="closeModal('event-modal')">Cancel</button>
                        <button class="btn primary-btn" onclick="saveEvent()">Save Event</button>
            </div>
        </div>
    </div>

    <!-- Add View Event Modal -->
    <div class="modal-backdrop" id="view-event-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-calendar-day"></i> Event Details</h2>
                <button class="close-modal" onclick="closeModal('view-event-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="event-detail-card">
                    <div class="event-detail-header">
                        <div class="event-detail-image">
                            <img id="view-event-image" src="" alt="Event Image">
                        </div>
                        <div class="event-detail-status">
                            <span id="view-event-type" class="event-type"></span>
                            <span id="view-event-status" class="status-badge"></span>
                        </div>
                    </div>
                    <div class="event-detail-content">
                        <h3 id="view-event-title" class="event-detail-title"></h3>
                        <div class="event-detail-info">
                            <div class="detail-item">
                                <i class="fas fa-calendar"></i>
                                <span id="view-event-date"></span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-clock"></i>
                                <span id="view-event-time"></span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span id="view-event-venue"></span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-users"></i>
                                <span id="view-event-capacity"></span>
                            </div>
                        </div>
                        <div class="event-detail-description">
                            <h4>Description</h4>
                            <p id="view-event-description"></p>
                        </div>
                        <div class="capacity-section">
                            <div class="capacity-header">
                                <h4>Capacity</h4>
                                <span id="view-capacity-text"></span>
                            </div>
                            <div class="capacity-bar-large">
                                <div id="view-capacity-progress" class="capacity-progress"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container"></div>

    <script src="js/admin.js"></script>
    <script>
        let currentPage = 1;
        let totalPages = 3;
        let currentView = 'calendar';
        let currentDate = new Date();

        document.addEventListener('DOMContentLoaded', function() {
            // View switching
            const viewButtons = document.querySelectorAll('.view-btn');
            const calendarView = document.getElementById('calendar-view');
            const listView = document.getElementById('list-view');

            viewButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const view = button.dataset.view;
                    currentView = view;
                    
                    // Update active button
                    viewButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Show active view
                    if (view === 'calendar') {
                        calendarView.style.display = 'block';
                        listView.style.display = 'none';
                        renderCalendar();
                        } else {
                        calendarView.style.display = 'none';
                        listView.style.display = 'block';
                        }
                });
            });

            // File upload preview
            const eventImage = document.getElementById('event-image');
            const uploadArea = document.querySelector('.upload-area');
            
            if (eventImage && uploadArea) {
                eventImage.addEventListener('change', function() {
                    if (this.files && this.files[0]) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            uploadArea.style.backgroundImage = `url(${e.target.result})`;
                            uploadArea.classList.add('has-image');
                        };
                        reader.readAsDataURL(this.files[0]);
                    }
                });

                // Drag and drop
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });

                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('dragover');
                });

                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    
                    if (e.dataTransfer.files && e.dataTransfer.files[0]) {
                        eventImage.files = e.dataTransfer.files;
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            uploadArea.style.backgroundImage = `url(${e.target.result})`;
                            uploadArea.classList.add('has-image');
                        };
                        reader.readAsDataURL(e.dataTransfer.files[0]);
                    }
                });
            }

            // Initialize calendar
            renderCalendar();
        });

        function renderCalendar() {
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            const calendarTitle = document.getElementById('calendar-title');
            const calendarGrid = document.querySelector('.calendar-days');
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            calendarTitle.textContent = `${months[month]} ${year}`;
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            
            const startingDay = firstDay.getDay();
            const totalDays = lastDay.getDate();
            
            let html = '';
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < startingDay; i++) {
                html += '<div class="calendar-day empty"></div>';
            }
            
            // Add cells for each day of the month
            for (let day = 1; day <= totalDays; day++) {
                const isToday = new Date().toDateString() === new Date(year, month, day).toDateString();
                const events = getEventsForDay(year, month, day);
                
                html += `
                    <div class="calendar-day ${isToday ? 'today' : ''}">
                        <span class="day-number">${day}</span>
                        <div class="day-events">
                            ${events}
                        </div>
                    </div>
                `;
            }
            
            // Add empty cells for remaining days to complete the grid
            const remainingDays = (7 - ((startingDay + totalDays) % 7)) % 7;
            for (let i = 0; i < remainingDays; i++) {
                html += '<div class="calendar-day empty"></div>';
            }
            
            calendarGrid.innerHTML = html;
        }

        function getEventsForDay(year, month, day) {
            // Sample events data - replace with actual events from your database
            const events = [
                { date: '2024-03-15', title: 'Art Exhibition', type: 'exhibition' },
                { date: '2024-03-15', title: 'Workshop', type: 'workshop' },
                { date: '2024-03-20', title: 'Gallery Opening', type: 'opening' },
                { date: '2024-03-25', title: 'Artist Talk', type: 'artist-talk' }
            ];
            
            const currentDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const dayEvents = events.filter(event => event.date === currentDate);
            
            return dayEvents.map(event => `
                <div class="event-dot ${event.type}" title="${event.title}">
                    ${event.title}
                </div>
            `).join('');
        }

        function prevMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        function openModal(modalId, action = 'Add') {
            document.getElementById(modalId).classList.add('active');
            document.getElementById('modal-action').textContent = action;
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.getElementById('event-form').reset();
            document.querySelector('.upload-area').style.backgroundImage = 'none';
            document.querySelector('.upload-area').classList.remove('has-image');
        }

        function applyFilters() {
            showToast('Success', 'Filters applied successfully', 'success');
            loadEvents();
        }

        function resetFilters() {
            document.querySelectorAll('.filters select').forEach(select => {
                select.value = '';
            });
            showToast('Success', 'Filters reset successfully', 'success');
            loadEvents();
        }

        function editEvent(id) {
            openModal('event-modal', 'Edit');
            // Load event data
            // This would typically fetch the event data from the server
        }

        function deleteEvent(id) {
            if (confirm('Are you sure you want to delete this event?')) {
                showToast('Success', 'Event deleted successfully', 'success');
                loadEvents();
            }
        }

        function saveEvent() {
            showToast('Success', 'Event saved successfully', 'success');
            closeModal('event-modal');
            loadEvents();
        }

        function loadEvents(page = 1) {
            // Sample events data - replace with actual API call
            const events = [
                {
                    id: 1,
                    title: 'Contemporary Art Exhibition',
                    type: 'exhibition',
                    date: '2024-03-15',
                    time: '6:00 PM - 9:00 PM',
                    venue: 'Main Gallery',
                    capacity: { current: 150, total: 200 },
                    image: '../images/events/exhibition1.jpg',
                    status: 'past',
                    description: 'A showcase of modern art pieces'
                },
                {
                    id: 2,
                    title: 'Digital Art Workshop',
                    type: 'workshop',
                    date: '2024-03-20',
                    time: '2:00 PM - 5:00 PM',
                    venue: 'Workshop Space',
                    capacity: { current: 25, total: 30 },
                    image: '../images/events/workshop1.jpg',
                    status: 'current',
                    description: 'Learn digital art techniques'
                },
                {
                    id: 3,
                    title: 'Meet the Artist: John Doe',
                    type: 'artist-talk',
                    date: '2024-03-25',
                    time: '4:00 PM - 6:00 PM',
                    venue: 'Auditorium',
                    capacity: { current: 80, total: 100 },
                    image: '../images/events/talk1.jpg',
                    status: 'upcoming',
                    description: 'Interactive session with renowned artist'
                }
            ];

            const tableBody = document.getElementById('events-table-body');
            tableBody.innerHTML = events.map(event => `
                <tr class="event-row ${event.status}">
                    <td>
                        <div class="event-info">
                            <div class="event-image-small">
                                <img src="${event.image}" alt="${event.title}">
                            </div>
                            <div class="event-text">
                                <h4>${event.title}</h4>
                                <span class="event-type ${event.type}">${event.type}</span>
                                <p class="event-description">${event.description}</p>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="event-datetime">
                            <div class="date">${new Date(event.date).toLocaleDateString('en-US', { 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            })}</div>
                            <div class="time">${event.time}</div>
                        </div>
                    </td>
                    <td>${event.venue}</td>
                    <td>
                        <span class="status-badge status-${event.status}">
                            ${event.status.charAt(0).toUpperCase() + event.status.slice(1)}
                        </span>
                    </td>
                    <td>
                        <div class="table-actions">
                            <button class="btn icon-btn" onclick="viewEvent(${JSON.stringify(event).replace(/"/g, '&quot;')})" title="View">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn icon-btn" onclick="editEvent(${event.id})" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn icon-btn" onclick="deleteEvent(${event.id})" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');

            // Update pagination
            updatePagination(page, Math.ceil(events.length / 10));
        }

        function viewEvent(event) {
            // Populate view modal with event details
            document.getElementById('view-event-image').src = event.image;
            document.getElementById('view-event-title').textContent = event.title;
            document.getElementById('view-event-type').textContent = event.type;
            document.getElementById('view-event-type').className = `event-type ${event.type}`;
            document.getElementById('view-event-status').textContent = event.status.charAt(0).toUpperCase() + event.status.slice(1);
            document.getElementById('view-event-status').className = `status-badge status-${event.status}`;
            document.getElementById('view-event-date').textContent = new Date(event.date).toLocaleDateString('en-US', { 
                weekday: 'long',
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('view-event-time').textContent = event.time;
            document.getElementById('view-event-venue').textContent = event.venue;
            document.getElementById('view-event-capacity').textContent = `${event.capacity.current}/${event.capacity.total} Attendees`;
            document.getElementById('view-event-description').textContent = event.description;
            document.getElementById('view-capacity-text').textContent = `${event.capacity.current}/${event.capacity.total} Seats Filled`;
            
            const capacityPercentage = (event.capacity.current / event.capacity.total) * 100;
            const progressBar = document.getElementById('view-capacity-progress');
            progressBar.style.width = `${capacityPercentage}%`;
            
            // Open the modal
            openModal('view-event-modal');
        }

        function updatePagination(currentPage, totalPages) {
            const pagination = document.querySelector('.pagination');
            const isFirstPage = currentPage === 1;
            const isLastPage = currentPage === totalPages;

            pagination.innerHTML = `
                <button class="pagination-item ${isFirstPage ? 'disabled' : ''}" 
                        onclick="changePage(1)" ${isFirstPage ? 'disabled' : ''}>
                    <i class="fas fa-angle-double-left"></i>
                </button>
                <button class="pagination-item ${isFirstPage ? 'disabled' : ''}" 
                        onclick="changePage(${currentPage - 1})" ${isFirstPage ? 'disabled' : ''}>
                    <i class="fas fa-angle-left"></i>
                </button>
                ${generatePageNumbers(currentPage, totalPages)}
                <button class="pagination-item ${isLastPage ? 'disabled' : ''}" 
                        onclick="changePage(${currentPage + 1})" ${isLastPage ? 'disabled' : ''}>
                    <i class="fas fa-angle-right"></i>
                </button>
                <button class="pagination-item ${isLastPage ? 'disabled' : ''}" 
                        onclick="changePage(${totalPages})" ${isLastPage ? 'disabled' : ''}>
                    <i class="fas fa-angle-double-right"></i>
                </button>
                <span class="pagination-info">Page ${currentPage} of ${totalPages}</span>
            `;
        }

        function generatePageNumbers(currentPage, totalPages) {
            let pages = [];
            const maxVisiblePages = 3;

            if (totalPages <= maxVisiblePages) {
                for (let i = 1; i <= totalPages; i++) {
                    pages.push(i);
                }
            } else {
                if (currentPage <= maxVisiblePages - 1) {
                    pages = [1, 2, 3, '...', totalPages];
                } else if (currentPage >= totalPages - 1) {
                    pages = [1, '...', totalPages - 2, totalPages - 1, totalPages];
                } else {
                    pages = [1, '...', currentPage, '...', totalPages];
                }
            }

            return pages.map(page => {
                if (page === '...') {
                    return '<span class="pagination-item">...</span>';
                }
                return `
                    <button class="pagination-item ${page === currentPage ? 'active' : ''}" 
                            onclick="changePage(${page})">
                        ${page}
                    </button>
                `;
            }).join('');
        }

        function changePage(page) {
            if (page < 1 || page > totalPages) return;
            currentPage = page;
            loadEvents(page);
        }

        // Initialize events on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadEvents(1);
        });

        function showToast(title, message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <i class="toast-icon fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : type === 'error' ? 'times-circle' : 'info-circle'}"></i>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
                <div class="toast-progress"></div>
            `;
            
            document.querySelector('.toast-container').appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>

    <style>
        /* Table Styles */
        .table-responsive {
            overflow-x: auto;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table th {
            background: var(--secondary-bg);
            font-weight: 600;
            color: var(--text-color);
        }

        .event-row {
            transition: background-color 0.3s ease;
        }

        .event-row:hover {
            background: var(--hover-bg);
        }

        .event-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .event-image-small {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            overflow: hidden;
        }

        .event-image-small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .event-text h4 {
            margin: 0 0 4px 0;
            color: var(--text-color);
        }

        .event-description {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin: 4px 0 0 0;
        }

        .event-type {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .event-type.exhibition { background: #FFE2E2; color: #FF4D4D; }
        .event-type.workshop { background: #E2F5FF; color: #4DA6FF; }
        .event-type.artist-talk { background: #E2FFE2; color: #4DC24D; }

        .event-datetime {
            line-height: 1.4;
        }

        .event-datetime .date {
            font-weight: 500;
        }

        .event-datetime .time {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .capacity-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .capacity-bar {
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            position: relative;
            width: 100px;
        }

        .capacity-bar::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: var(--capacity);
            background: var(--primary-color);
            border-radius: 3px;
        }

        .table-actions {
            display: flex;
            gap: 8px;
        }

        .table-actions .btn {
            padding: 6px;
            border-radius: 6px;
        }

        /* Status Styles */
        .event-row.past {
            background: var(--secondary-bg);
            opacity: 0.8;
        }

        .event-row.past .event-image-small img {
            filter: grayscale(1);
        }

        .event-row.current {
            background: var(--success-color-light);
        }

        /* Dark Mode Adjustments */
        .dark-mode .data-table th {
            background: var(--dark-secondary);
        }

        .dark-mode .event-row:hover {
            background: var(--dark-hover);
        }

        /* View Event Modal Styles */
        .event-detail-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
        }

        .event-detail-header {
            position: relative;
        }

        .event-detail-image {
            width: 100%;
            height: 240px;
            overflow: hidden;
        }

        .event-detail-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .event-detail-status {
            position: absolute;
            top: 16px;
            right: 16px;
            display: flex;
            gap: 8px;
        }

        .event-detail-content {
            padding: 24px;
        }

        .event-detail-title {
            margin: 0 0 16px 0;
            font-size: 1.5rem;
            color: var(--text-color);
        }

        .event-detail-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-color);
        }

        .detail-item i {
            color: var(--primary-color);
            width: 16px;
        }

        .event-detail-description {
            margin-bottom: 24px;
        }

        .event-detail-description h4 {
            margin: 0 0 8px 0;
            color: var(--text-color);
        }

        .event-detail-description p {
            color: var(--text-muted);
            line-height: 1.6;
        }

        .capacity-section {
            background: var(--secondary-bg);
            padding: 16px;
            border-radius: 8px;
        }

        .capacity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .capacity-header h4 {
            margin: 0;
            color: var(--text-color);
        }

        .capacity-bar-large {
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .capacity-progress {
            height: 100%;
            background: var(--primary-color);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* Dark Mode Adjustments */
        .dark-mode .event-detail-card {
            background: var(--dark-card);
        }

        .dark-mode .capacity-section {
            background: var(--dark-secondary);
        }
    </style>
</body>
</html> 